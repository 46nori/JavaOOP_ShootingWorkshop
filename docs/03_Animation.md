# Step 3: Enemyクラスを動かしてみよう

作ったクラスを使って、実際に画面上で動かしてみましょう。
`src/step03_animation` パッケージを使います。

## 🎬 アニメーションの仕組み

コンピュータの画面でキャラクターが動いて見えるのは、実は**「パラパラ漫画」**と同じ仕組みです。
以下の4つの手順を高速に繰り返すことで、人間の目には滑らかに動いているように見えます。

1. **消す (Erase)**: 前の場所に描いた絵を消す（背景色で塗りつぶすなど）。
2. **動かす (Move)**: キャラクターの座標（X, Y）を少しだけずらす。
3. **描く (Draw)**: 新しい座標に絵を描く。
4. **待つ (Sleep)**: ほんの少しだけ待機する（これがないと速すぎて見えません）。

この「消す→動かす→描く」のループ（繰り返し）を作ることが、ゲームプログラミングの基本です。

## ファイル: `GameMain.java`

```java
package step03_animation;

import javax.swing.JFrame;
import java.awt.Graphics;

public class GameMain extends JFrame {
    
    public static void main(String[] args) {
        new GameMain();
    }

    public GameMain() {
        // ウィンドウの設定
        this.setTitle("Shooting Game Step 3");
        this.setSize(800, 600);
        this.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        this.setVisible(true);

        Graphics g = this.getGraphics();

        // 1. インスタンス生成 (new)
        Enemy enemy = new Enemy(100, 100, 45, 2.0);

        // ゲームループ
        while (true) {
            try {
                // 2. 消去 -> 3. 移動 -> 4. 描画
                enemy.erase(g);
                enemy.move();
                enemy.draw(g);

                Thread.sleep(16); 
            } catch (InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
}
```

> **☕ コラム：ウィンドウ設定の4行**
> `GameMain` の最初にある4行のコードは、ゲーム画面を作るための決まり文句です。
> - `setTitle(...)`: ウィンドウの上のバーに表示されるタイトルを決めます。
>
> - `setSize(800, 600)`: ウィンドウの大きさ（幅800px, 高さ600px）を決めます。
> - `setDefaultCloseOperation(...)`: 「×ボタン」を押したときに、プログラムも一緒に終了するようにします（これがないとウィンドウが消えてもプログラムが動き続けてしまいます）。
> - `setVisible(true)`: 準備できたウィンドウを画面に「表示」します（最初は隠れているので、これが必要です）。

> **☕ コラム：import と ウィンドウサイズ**
> コードの最初にある `import` や、設定の数値には大事な意味があります。
>
> - **import (インポート)**:
>   Javaには、ウィンドウを表示したり絵を描いたりするための便利な「道具箱（ライブラリ）」がたくさん用意されています。
>   `import` は「この道具箱を使います！」という宣言です。
>   - `javax.swing.JFrame`: ウィンドウを作るための道具。
>   - `java.awt.Graphics`: 絵を描くための絵筆のような道具。
>
> - **ウィンドウサイズと座標系**:
>   `this.setSize(800, 600);` は、ゲーム画面の大きさを決めています。
>   - **幅 (Width)**: 800ピクセル
>   - **高さ (Height)**: 600ピクセル
>
>   **⚠️ 注意：座標の向き**
>   数学のグラフとは違い、コンピュータの画面は **「左上が原点 (0, 0)」** です。
>   - **X軸**: 右に行くほど増える（数学と同じ）
>   - **Y軸**: **下に行くほど増える**（数学と逆！）
>
>   つまり、`y += 5` するとキャラクターは「下に」動きます。
>   今後のステップで `x > 800` のようなコードが出てきたら、「画面の右端からはみ出したら」という意味になります。

> **☕ コラム：extends JFrame ってなに？**
> クラス名の後ろにある `extends JFrame` は「**継承 (Inheritance)**」という機能を使っています。
> これは「`JFrame`（ウィンドウを表示する便利なクラス）の機能を全部引き継いで、新しいクラスを作ります」という意味です。
> 自分でウィンドウを表示するプログラムをゼロから書くのは大変ですが、`extends` を使うと、誰かが作ってくれた便利な機能を自分のクラスに簡単に取り込むことができます。
> 詳しくは今後の授業で学びますが、今は「便利な機能を使うための呪文」だと思っておいてください！

> **☕ コラム：try-catch ってなに？**
> コードの中に `try { ... } catch (...) { ... }` という見慣れないブロックがありますね。これは「**例外処理 (Exception Handling)**」と呼ばれるものです。
> 
> - **try**: 「この中にある命令を実行してみてね」
> - **catch**: 「もし実行中にエラー（例外: Exception）が起きたら、ここでキャッチして対処するよ」
> 
> `Thread.sleep(16)` はプログラムを一時停止させる命令ですが、停止中に「急に起こされる（割り込まれる）」可能性があります。Javaでは、そのような不測の事態に備えて「もし割り込まれたらどうするか」を書いておかないとエラーになるルールがあるのです。
> 今は「おまじない」だと思って書いておけば大丈夫です！

## 実行方法

Eclipse上で `GameMain.java` を右クリックし、**[Run As]** > **[Java Application]** を選択します。

次は [Step 4: 多数の敵の生成と制御](04_Array.md) です。
